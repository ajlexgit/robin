/*
  Многоколоночная верстка через flexbox.

  Пример:
    .list {
      @include flexbox;
      @include flex-flow(row wrap);

      .item {
        @include flex-columns(2, 10px, 10px);
      }
    }
*/
@mixin flex-columns($columns, $margin-right:null, $margin-top:null) {
  max-width: calc(#{100% / $columns} - #{(($columns - 1) * $margin-right) / $columns});

  $min_width: 100% / ($columns + 1);
  $max_width: 100% / $columns;
  @include flex(1 0 #{($min_width + $max_width) / 2});

  @if ($margin-right) {
    margin-right: $margin-right;
    &:nth-of-type(#{$columns}n) {
      margin-right: 0;
    }
  }

  @if ($margin-top) {
    &:nth-of-type(n+#{$columns+1}) {
      margin-top: $margin-top;
    }
  }
}