{% load i18n %}
{% load variation_field %}

<div class="stdimage">
  <div class="item-preview"
       {% if not value %}style="display: none"{% endif %}
       data-size="{{ admin_variation.size|join:'x' }}"
       data-crop="{{ admin_variation.crop|yesno:"1,0,1" }}"
       data-stretch="{{ admin_variation.stretch|yesno:"1,0,0" }}"
       data-max_width="{{ admin_variation.max_width }}"
       data-max_height="{{ admin_variation.max_height }}"
       data-offset="{{ admin_variation.offset|default:''|join:'x' }}"
       data-center="{{ admin_variation.center|default:''|join:'x' }}"
       data-background="{{ admin_variation.background|join:',' }}"
       data-source="{{ value.url_nocache }}">
    {% with variation_field=value|get_variation:admin_variation.name %}
      <img src="{{ variation_field.url_nocache }}">
    {% endwith %}
  </div>

  <p class="hint">
    {% trans 'Dimensions: ' %} {% trans 'from' %} {{ min_dimensions|join:'x' }} {% trans 'to' %} {{ max_dimensions|join:'x' }}
  </p>

  {{ input }}

  {% if crop_area %}
    <div class="crop-btn-wrapper {% if not value %}hide{% endif %}">
      <button class="btn"
              data-crop="{{ value.croparea|default:'' }}"
              data-aspects="{{ aspects }}"
              data-min_dimensions="{{ min_dimensions|join:'x' }}"
              data-max_dimensions="{{ max_dimensions|join:'x' }}">
        {% trans 'Crop image' %}
      </button>
      <input type="hidden" name="{{ name }}-croparea" value="">
    </div>
  {% endif %}

  {% if value %}
    <div>
      <span>{% trans 'Delete' %}:</span>
      <input type="checkbox" name="{{ name }}-delete" class="delete"/>
    </div>
  {% endif %}
</div>
