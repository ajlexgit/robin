{% extends 'layout.html' %}

{% load pipeline %}
{% load text %}
{% load i18n %}

{% block static_head %}
  {{ block.super }}
  {% stylesheet 'blog_page' %}
{% endblock static_head %}

{% block static_js %}
  {{ block.super }}
  {% javascript 'blog_page' %}
{% endblock static_js %}


{% block content %}

  <div id="blog" class="block">
    <div class="grid-block">
      <h1 class="title-h1">{{ config.header }}</h1>

      {% if tags %}
        <ul id="tags">
          <li class="tag {% if not current_tag %}active{% endif %}">
            <a href="{% url 'blog:index' %}">{% trans 'All' %}</a>
          </li>

          {% for tag in tags %}
            <li class="tag {% if current_tag.pk == tag.pk %}active{% endif %}">
              <a href="{{ tag.get_absolute_url }}">{{ tag.title }}</a>
            </li>
          {% endfor %}
        </ul>
      {% endif %}

      <ul id="posts">
        {% for post in paginator.page %}
          <li class="post">
            <div class="date">{{ post.date|date:"jS E Y" }}</div>

            <div class="title title-h2">
              <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
            </div>

            {% if post.preview %}
              <a href="{{ post.get_absolute_url }}" class="preview">
                <img srcset="{{ post.preview.normal.srcset }}, {{ post.preview.mobile.srcset }}"
                     src="{{ post.preview.normal.url }}" sizes="100vw">
              </a>
            {% endif %}

            {% if post.note %}
              <div class="note text-styles">
                {{ post.note|clean }}
              </div>
            {% endif %}
          </li>
        {% endfor %}
      </ul>

      {% if paginator.num_pages > 1 %}
        <div id="paginator">
          {{ paginator }}
        </div>
      {% endif %}

    </div>
  </div>

{% endblock content %}
